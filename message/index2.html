<!DOCTYPE html>
<html lang="ja">
<head>
<title>ひたち光教会アプリlite</title>
<meta name="robots" content="noindex,nofollow,noarchive" />
<meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=10.0,user-scalable=yes" name="viewport">
<meta charset="utf-8">
<link href="./img/hhc.ico" rel="shortcut icon">
<link href="./img/hhc.ico" rel="apple-touch-icon">
<link href="//netdna.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="list.js"></script>
		
<!-- for iphone -->
<!-- アドレスバー等のブラウザのUIを非表示 -->
<meta name="apple-mobile-web-app-capable" content="yes">
<!-- default（Safariと同じ） / black（黒） / black-translucent（ステータスバーをコンテンツに含める） -->
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<!-- ホーム画面に表示されるアプリ名 -->
<meta name="apple-mobile-web-app-title" content="HHCapp">
<!-- ホーム画面に表示されるアプリアイコン -->
<link rel="apple-touch-icon" href="./img/hhc.ico">

<!-- for android -->
<link rel="manifest" href="./manifest.json" />
    <script>
        window.addEventListener('load', function () {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register("./serviceWorker.js")
                    .then(function (registration) {
                        console.log("serviceWorker registed.");
                    }).catch(function (error) {
                        console.warn("serviceWorker error.", error);
                    });
            }
        });
    </script>
	
<style type="text/css">
<!--
.col-xs-12,.col-xs-6,.col-xs-4,.col-xs-3,.col-xs-2 {padding-right : 0px;padding-left : 0px;}
audio { width: 100%; }
select{ font-size:14px; border:1px;}
	
.movieWraper {
    position: relative
    width: calc(100% - 10px);
    margin: 0 auto;
}

.iframeWrap{
    height: 0;
    padding-bottom: 62.5%;
}

iframe {
    position: absolute;
    top: 0;
    left: 0;
}
	
}
-->
</style>
<script>

var get_nowTime = function(){
	val = document.getElementById("audio").currentTime;
	window.localStorage.setItem("nowTime", val);
  }

setInterval(get_nowTime, 15000);

$(function () {
	$("select").change(audioset);
});

function readFirst(){
    for(var i=0;i<list.length;i++){
      let opt = document.createElement("option");
      opt.value = list[i].val;  //value値
      opt.text = list[i].txt;   //テキスト値
      document.getElementById("messageSelect").appendChild(opt);
    }
	audioset();
        val = window.localStorage.getItem("nowTime");
	document.getElementById("audio").currentTime = val;
  };

function audioset(){
	var selaudio;
	var audio = new Audio();
	selaudio = $(messageSelect).val().substr(0,8);
	console.log(selaudio);
	audio.controls = true;
	audio.src = "./m4a/" + selaudio + ".m4a";
	audio.id = "audio";
	audio.preload = "auto";
	$(message).html(audio);
	document.getElementById("audio").play();
};
function skip(seconds){
	document.getElementById("audio").currentTime += seconds;
	document.getElementById("audio").play();
};
function move(seconds){
	document.getElementById("audio").currentTime = seconds;
	document.getElementById("audio").play();
};
function rateup(speed){
	document.getElementById("audio").playbackRate = speed;
	document.getElementById("audio").play();
};

</script>
</head>
<body onload="readFirst()">
<div class="container">
	<div class="row">
		<h4 class="text-center">ひたち光教会アプリlite</h4>
	</div>
	<br><hr />
	<div class="row">
		<div class="col-xs-12 col-lg-9">
			<div class="col-xs-12">
				<label for="messageSelect">礼拝説教：聴きたいものを選んでください</label>
				<form><select class="form-control" id="messageSelect"></select></form>
			</div>
			<div class="col-xs-12" id="message">
			</div>
			<div class="col-xs-3"><input class="btn btn-block btn-lg btn-default" onclick="skip(-30)"	type="button" value="<<30秒"></div>
			<div class="col-xs-3"><input class="btn btn-block btn-lg btn-default" onclick="skip(-5)"	type="button" value="<<5秒"></div>
			<div class="col-xs-3"><input class="btn btn-block btn-lg btn-default" onclick="skip(5)"		type="button" value="5秒>>"></div>
			<div class="col-xs-3"><input class="btn btn-block btn-lg btn-default" onclick="skip(30)"	type="button" value="30秒>>"></div>

			<div class="col-xs-2"><input class="btn btn-block btn-lg btn-default" onclick="rateup(0.8)"	type="button" value="x0.8"></div>
			<div class="col-xs-2"><input class="btn btn-block btn-lg btn-default" onclick="rateup(1.0)"	type="button" value="x1.0"></div>
			<div class="col-xs-2"><input class="btn btn-block btn-lg btn-default" onclick="rateup(1.5)"	type="button" value="x1.5"></div>
			<div class="col-xs-2"><input class="btn btn-block btn-lg btn-default" onclick="rateup(2.0)"	type="button" value="x2.0"></div>
			<div class="col-xs-2"><input class="btn btn-block btn-lg btn-default" onclick="rateup(2.5)"	type="button" value="x2.5"></div>
			<div class="col-xs-2"><input class="btn btn-block btn-lg btn-default" onclick="rateup(3.0)"	type="button" value="x3.0"></div>

			<div class="col-xs-2"><input class="btn btn-block btn-lg btn-default" onclick="move(600)"	type="button" value="10"></div>
			<div class="col-xs-2"><input class="btn btn-block btn-lg btn-default" onclick="move(1200)"	type="button" value="20"></div>
			<div class="col-xs-2"><input class="btn btn-block btn-lg btn-default" onclick="move(1800)"	type="button" value="30"></div>
			<div class="col-xs-2"><input class="btn btn-block btn-lg btn-default" onclick="move(2400)"	type="button" value="40"></div>
			<div class="col-xs-2"><input class="btn btn-block btn-lg btn-default" onclick="move(3000)"	type="button" value="50"></div>
			<div class="col-xs-2"><input class="btn btn-block btn-lg btn-default" onclick="move(3600)"	type="button" value="60"></div>
      			
		</div>
	</div>
</div>
</body>
</html>
