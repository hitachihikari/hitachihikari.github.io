<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=0.9">
<meta name="description" content="">
<meta name="author" content="">
<title>行き帰り</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
</head>
<body>
<div class="container">
        <h1 id="clk"></h1>
        <table class="table table-bordered">
        <thead>
                <tr><td>No</td><td>下台原発</td><td>JR大甕発</td><td>JR勝田着</td><td>バス発</td></tr>
        <thead>
        <tbody>
                <tr><td> 1</td><td></td><td>6:49</td><td>7:03</td><td></td>
                <tr><td> 2</td><td>6:45-6:54</td><td>7:14</td><td>7:29</td><td></td>
                <tr><td> 3</td><td></td><td>7:31</td><td>7:46</td><td></td>
                <tr><td> 4</td><td></td><td>7:43</td><td>7:58</td><td></td>
        </tbody>
        </table>
        
        <table class="table table-bordered">
        <thead>
                <tr><td>No</td><td>会社発</td><td>会社バス発</td><td>JR勝田発</td><td>JR大甕着</td><td>大甕バス発</td><td>下台原着</td></tr>
        <thead>
        <tbody id="kaeri">
                <tr><td>01</td><td>17:00</td><td>17:10</td><td>17:21</td><td>17:36</td><td>18:02</td><td>18:13</td></tr>
                <tr><td>02</td><td>17:15</td><td>17:26</td><td>17:42</td><td>17:57</td><td>18:02</td><td>18:13</td></tr>
                <tr><td>03</td><td>17:30</td><td>17:48</td><td>18:21</td><td>18:35</td><td>18:43</td><td>18:54</td></tr>
                <tr><td>04</td><td>18:00</td><td>18:15</td><td>18:47</td><td>19:02</td><td>19:24</td><td>19:35</td></tr>
                <tr><td>05</td><td>18:30</td><td>18:43</td><td>19:04</td><td>19:19</td><td>19:24</td><td>19:35</td></tr>
                <tr><td>06</td><td>19:00</td><td>徒歩</td><td>19:31</td><td>19:46</td><td>19:51</td><td>20:02</td></tr>
                <tr><td>07</td><td>19:30</td><td>19:43</td><td>20:21</td><td>20:35</td><td>20:40</td><td>20:51</td></tr>
                <tr><td>08</td><td>20:00</td><td>20:18</td><td>20:45</td><td>21:00</td><td>21:05</td><td>21:16</td></tr>
                <tr><td>09</td><td>20:30</td><td>20:48</td><td>21:09</td><td>21:31</td><td>21:37</td><td>21:48</td></tr>
                <tr><td>10</td><td>21:00</td><td>徒歩</td><td>21:34</td><td>21:48</td><td>無いの</td><td></td></tr>
                <tr><td>11</td><td>21:30</td><td>徒歩</td><td>22:10</td><td>22:23</td><td>無いの</td><td></td></tr>
                <tr><td>12</td><td>22:30</td><td>徒歩</td><td>23:02</td><td>23:17</td><td>無いの</td><td></td></tr>
                <tr><td>13</td><td>23:00</td><td>徒歩</td><td>23:38</td><td>23:51</td><td>無いの</td><td></td></tr>
        </tbody>
        </table>
</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

<script>
        function clock() {
                var myDay = new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat");
                var now  = new Date();
                var year = now.getFullYear();
                var month = now.getMonth()+1;
                var date = now.getDate();
                var day = now.getDay();
                var hour = now.getHours();
                var min  = now.getMinutes();
                var sec  = now.getSeconds();
                var nowtime = hour + min/60;
                if(hour < 10) { hour = "0" + hour; }
                if(min < 10) { min = "0" + min; }
                if(sec < 10) { sec = "0" + sec; }
                var clk = year + '/' + month + '/' + date + ' ' + myDay[day] + ' ' + hour + ':' + min ;
                document . getElementById( 'clk' ) . innerHTML= clk . toLocaleString();

                var time = [17,17.25,17.5,18,18.5,19,19.5,20,20.5,21,21.5,22.5,23];
                for(var i=0;nowtime>time[i];i++){};
                nexttr = i;
                for(var i=0;i<nexttr;i++){$('#kaeri tr').eq(i).css('background-color', '#aaa');}
                
                window . setTimeout( "clock()", 10000);
        };
        window . onload = clock;

        $('#kaeri tr').click(function(e){
                var now  = new Date();
                var hour = now.getHours();
                var min  = now.getMinutes();
                var sec  = now.getSeconds();
                var rand = Math.floor( Math.random() * 3 ) ;

                var gettr = $(this).html();
                gettr = gettr.replace(/<td>/g,'');
                gettr = gettr.replace(/<\/td>/g,' ');
                gettr = gettr.split(" ");
                var m = '勝田発' + gettr[3] + ' -> 大甕着' + gettr[4] + 'で帰るよ～。' + 'バスは' + gettr[5] + 'よ〜。' + 'このメールは' + hour +':' + min + ':' + sec + 'に送ったのです。';
                
                var address = 'mybaptismday991114' + '@' +'gmail.com';
                var subject = ["おつかれさん(^з^)-☆","おつかれさんo(ﾟ▽ﾟ)/","おつかれさん（´3｀）~♪"];
                location.href = 'm'+'a'+'i'+'l'+'t'+'o'+':' + address + '?subject=' + subject[rand] + '&body=' + m + '';
                //console.log(subject[rand]);
        });


</script>
</body>
</html>